(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{71:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return b}));var r=n(2),o=n(6),s=(n(0),n(83)),a={id:"use-form",title:"useForm() hook"},l={unversionedId:"core/use-form",id:"core/use-form",isDocsHomePage:!1,title:"useForm() hook",description:"Use this hook to access values and methods from a `` component.",source:"@site/docs/core/useForm-hook.mdx",slug:"/core/use-form",permalink:"/docs/core/use-form",editUrl:"https://github.com/ivan-dalmet/formiz/edit/master/documentation/docs/core/useForm-hook.mdx",version:"current",sidebar:"docs",previous:{title:"<FormizStep> component",permalink:"/docs/core/formiz-step"},next:{title:"useField() hook",permalink:"/docs/core/use-field"}},i=[{value:"Usage from outside <code>&lt;Formiz&gt;</code>",id:"usage-from-outside-formiz",children:[]},{value:"Usage from a child component of <code>&lt;Formiz&gt;</code>",id:"usage-from-a-child-component-of-formiz",children:[]},{value:"Hook options",id:"hook-options",children:[{value:"subscribe",id:"subscribe",children:[]}]},{value:"Form actions",id:"form-actions",children:[{value:"submit()",id:"submit",children:[]},{value:"submitStep()",id:"submitstep",children:[]},{value:"invalidateFields(objectOfErrors)",id:"invalidatefieldsobjectoferrors",children:[]},{value:"setFieldsValues(objectOfValues, options)",id:"setfieldsvaluesobjectofvalues-options",children:[]},{value:"reset()",id:"reset",children:[]},{value:"getFieldStepName(fieldName)",id:"getfieldstepnamefieldname",children:[]},{value:"nextStep()",id:"nextstep",children:[]},{value:"prevStep()",id:"prevstep",children:[]},{value:"goToStep(name)",id:"gotostepname",children:[]}]},{value:"Form state",id:"form-state",children:[{value:"isValid",id:"isvalid",children:[]},{value:"isValidating",id:"isvalidating",children:[]},{value:"isSubmitted",id:"issubmitted",children:[]},{value:"resetKey",id:"resetkey",children:[]},{value:"currentStep",id:"currentstep",children:[]},{value:"steps",id:"steps",children:[]},{value:"isStepPristine",id:"issteppristine",children:[]},{value:"isStepValid",id:"isstepvalid",children:[]},{value:"isStepValidating",id:"isstepvalidating",children:[]},{value:"isStepSubmitted",id:"isstepsubmitted",children:[]},{value:"isFirstStep",id:"isfirststep",children:[]},{value:"isLastStep",id:"islaststep",children:[]}]},{value:"Fields state",id:"fields-state",children:[{value:"values",id:"values",children:[]},{value:"flatValues",id:"flatvalues",children:[]},{value:"fields",id:"fields",children:[]}]}],c={rightToc:i};function b(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(s.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("p",null,"Use this hook to access values and methods from a ",Object(s.b)("inlineCode",{parentName:"p"},"<Formiz>")," component."),Object(s.b)("h2",{id:"usage-from-outside-formiz"},"Usage from outside ",Object(s.b)("inlineCode",{parentName:"h2"},"<Formiz>")),Object(s.b)("h4",{id:"1-connect-your-form"},"1. Connect your form"),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react'\nimport { Formiz, useForm } from '@formiz/core'\nimport { MyField } from './MyField'\n\nexport const MyForm = () => {\n  const myForm = useForm()\n\n  return (\n    <Formiz connect={myForm}>\n      {/* Your fields here */}\n    </Formiz>\n  )\n}\n")),Object(s.b)("h4",{id:"2-access-values-and-methods"},"2. Access values and methods"),Object(s.b)("p",null,"You have now access to the form."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react'\nimport { Formiz, useForm } from '@formiz/core'\nimport { MyField } from './MyField'\n\nexport const MyForm = () => {\n  const myForm = useForm()\n\n  return (\n    <Formiz connect={myForm}>\n      <form onSubmit={myForm.submit}>\n        {myForm.isValid && 'The form is valid!'}\n        {/* Your fields here */}\n        <button type=\"submit\">\n          Submit\n        </button>\n      <form>\n    </Formiz>\n  )\n}\n")),Object(s.b)("h2",{id:"usage-from-a-child-component-of-formiz"},"Usage from a child component of ",Object(s.b)("inlineCode",{parentName:"h2"},"<Formiz>")),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react'\nimport { Formiz, useForm } from '@formiz/core'\nimport { MyField } from './MyField'\n\nexport const MySubComponent = () => {\n  const myForm = useForm()\n\n  return myForm.isValid && 'The form is valid!';\n}\n\nexport const MyForm = () => {\n  return (\n    <Formiz>\n      ...\n      <MySubComponent />\n      ...\n    </Formiz>\n  )\n}\n")),Object(s.b)("hr",null),Object(s.b)("h2",{id:"hook-options"},"Hook options"),Object(s.b)("h3",{id:"subscribe"},"subscribe"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"TL;DR Use this option for performance optimization only")),Object(s.b)("p",null,"The ",Object(s.b)("inlineCode",{parentName:"p"},"subscribe")," option allows you to tell which part of the internal state you want to subscribe to.\nBy default, you subscribe to the complete internal state. But for performance optimizations, you can choose exactly what you want."),Object(s.b)("p",null,"Each time the internal state is updated, the component with the ",Object(s.b)("inlineCode",{parentName:"p"},"useForm()")," is updated.\nWith this you can avoid many unecessary rerender and optimize your application by choosing only what you want to subscribe to."),Object(s.b)("h5",{id:"available-values"},"Available values"),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"// Subscribe to form & fields state (default)\nuseForm()\n/* same as */ useForm({ subscribe: true })\n/* same as */ useForm({ subscribe: { form: true, fields: true } })\n\n// Subscribe to nothing (only access to form actions)\nuseForm({ subscribe: false })\n/* same as */ useForm({ subscribe: { form: false, fields: false } })\n\n// Subscribe to form state\nuseForm({ subscribe: 'form' })\n/* same as */ useForm({ subscribe: { form: true } })\n/* same as */ useForm({ subscribe: { form: true, fields: false } })\n\n// Subscribe to fields state\nuseForm({ subscribe: 'fields' })\n/* same as */ useForm({ subscribe: { fields: true } })\n/* same as */ useForm({ subscribe: { form: false, fields: true } })\n\n// Subscribe to form state & only to some fields\nuseForm({ subscribe: { form: true, fields: ['email', 'password'] } })\n\n// Subscribe only to some fields\nuseForm({ subscribe: { fields: ['email', 'password'] } })\n")),Object(s.b)("hr",null),Object(s.b)("h2",{id:"form-actions"},"Form actions"),Object(s.b)("p",null,"The ",Object(s.b)("inlineCode",{parentName:"p"},"useForm")," return an object with the following properties:"),Object(s.b)("h3",{id:"submit"},"submit()"),Object(s.b)("p",null,"Allow you to submit the form"),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),'<Formiz connect={myForm}>\n  <form onSubmit={myForm.submit}>\n    {/* Your fields here */}\n    <button type="submit">\n      Submit\n    </button>\n  </form>\n</Formiz>\n')),Object(s.b)("h3",{id:"submitstep"},"submitStep()"),Object(s.b)("p",null,"Allows you to submit the current step."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),'<Formiz connect={myForm}>\n  <form onSubmit={myForm.submitStep}>\n    <FormizStep name="step1">\n      {/* Your fields here */}\n    </FormizStep>\n    <FormizStep name="step2">\n      {/* Your fields here */}\n    </FormizStep>\n    <button type="submit">\n      Submit\n    </button>\n  </form>\n</Formiz>\n')),Object(s.b)("h3",{id:"invalidatefieldsobjectoferrors"},"invalidateFields(objectOfErrors)"),Object(s.b)("p",null,"Allow you to invalidate one or many fields.",Object(s.b)("br",null),"\nUseful for API errors or other external errors."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"invalidateFields({\n  'fieldName': 'My error message',\n  'secondFieldName': 'Another error message',\n})\n")),Object(s.b)("h3",{id:"setfieldsvaluesobjectofvalues-options"},"setFieldsValues(objectOfValues, options)"),Object(s.b)("p",null,"Allow you to change the value of one or many fields imperatively.",Object(s.b)("br",null),"\nUseful to change one or many values based on an external action."),Object(s.b)("p",null,"\u26a0\ufe0f Don't use ",Object(s.b)("inlineCode",{parentName:"p"},"undefined")," as new value, it will not trigger the update (use ",Object(s.b)("inlineCode",{parentName:"p"},"null")," instead)."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"setFieldsValues({\n  'fieldName': 'New value',\n  'secondFieldName': 'Another new value',\n})\n")),Object(s.b)("h4",{id:"options"},"Options"),Object(s.b)("h5",{id:"keepunmounted"},"keepUnmounted"),Object(s.b)("p",null,"Set to ",Object(s.b)("inlineCode",{parentName:"p"},"true")," to keep the values of unmounted fields.\nThe values will be used as initial values on the next mount of each fields.\n(default is ",Object(s.b)("inlineCode",{parentName:"p"},"false"),")."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),'// Fields logic\n<FieldInput\n  name="fieldA"\n  label="Field A"\n/>\n{form.values?.fieldA === \'hello\' && (\n  <FieldInput\n    name="fieldB"\n    label="Field B"\n  />\n)}\n')),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"// setFieldsValues\nform.setFieldsValues(\n  { fieldA: 'hello', fieldB: 'world' },\n  { keepUnmounted: true }\n)\n")),Object(s.b)("h3",{id:"reset"},"reset()"),Object(s.b)("p",null,"Allows to reset the form with all fields values to their defaultValue."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.reset() // Trigger the form reset\n")),Object(s.b)("h3",{id:"getfieldstepnamefieldname"},"getFieldStepName(fieldName)"),Object(s.b)("p",null,"Allows you to get the step name of a field."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nconst stepNameOfEmail = myForm.getFieldStepName('email')\nmyForm.goToStep(stepNameOfEmail) // Navigate to the email field step\n")),Object(s.b)("h3",{id:"nextstep"},"nextStep()"),Object(s.b)("p",null,"Move to the next step."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.nextStep() // Go to the next step\n")),Object(s.b)("h3",{id:"prevstep"},"prevStep()"),Object(s.b)("p",null,"Move to the previous step."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.prevStep() // Go to the previous step\n")),Object(s.b)("h3",{id:"gotostepname"},"goToStep(name)"),Object(s.b)("p",null,"Go to a specific step."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.goToStep('my-step') // Go to the step with the name 'my-step'\n")),Object(s.b)("h2",{id:"form-state"},"Form state"),Object(s.b)("h3",{id:"isvalid"},"isValid"),Object(s.b)("p",null,"Returns true if the form is valid."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.isValid // true or false\n")),Object(s.b)("h3",{id:"isvalidating"},"isValidating"),Object(s.b)("p",null,"Returns true if one field or more is running async validations."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.isValidating // true or false\n")),Object(s.b)("h3",{id:"issubmitted"},"isSubmitted"),Object(s.b)("p",null,"Returns true if the form is submitted."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.isSubmitted // true or false\n")),Object(s.b)("h3",{id:"resetkey"},"resetKey"),Object(s.b)("p",null,"Allows you to reset some internal state when the form is reset."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\n\nuseEffect(() => {\n  /* Do a side effect on reset */\n}, [form.resetKey])\n")),Object(s.b)("h3",{id:"currentstep"},"currentStep"),Object(s.b)("p",null,"Returns the current step object."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"// currentStep properties\n{\n  index: number;\n  name: string;\n  label?: React.ReactNode;\n  isCurrent: boolean;\n  isPristine: boolean;\n  isValid: boolean;\n  isValidating: boolean;\n  isVisited: boolean;\n  isSubmitted: boolean;\n}\n")),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.currentStep?.name // step-name\n")),Object(s.b)("h3",{id:"steps"},"steps"),Object(s.b)("p",null,"Returns an array with all the steps of the form."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"// Properties for each steps\n{\n  index: number;\n  name: string;\n  label?: React.ReactNode;\n  isCurrent: boolean;\n  isPristine: boolean;\n  isValid: boolean;\n  isValidating: boolean;\n  isVisited: boolean;\n  isSubmitted: boolean;\n}\n")),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\n\nreturn (\n  <ul>\n    {myForm.steps?.map((step) => (\n      <li key={step.name}>\n        {step.isValid ? '\u2705' : '\u274c'}\n        {' '}\n        {step.label || step.name}\n      </li>\n    ))}\n  </ul>\n)\n")),Object(s.b)("h3",{id:"issteppristine"},"isStepPristine"),Object(s.b)("p",null,"Returns true if all the fields are pristine on the current step."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.isStepPristine // true or false\n")),Object(s.b)("h3",{id:"isstepvalid"},"isStepValid"),Object(s.b)("p",null,"Returns true if all the fields are valid on the current step."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.isStepValid // true or false\n")),Object(s.b)("h3",{id:"isstepvalidating"},"isStepValidating"),Object(s.b)("p",null,"Returns true if one field or more is running async validations on the current step."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.isStepValidating // true or false\n")),Object(s.b)("h3",{id:"isstepsubmitted"},"isStepSubmitted"),Object(s.b)("p",null,"Returns true if the current step is submitted."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.isStepSubmitted // true or false\n")),Object(s.b)("h3",{id:"isfirststep"},"isFirstStep"),Object(s.b)("p",null,"Returns true if the current step is the first step."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.isFirstStep // true or false\n")),Object(s.b)("h3",{id:"islaststep"},"isLastStep"),Object(s.b)("p",null,"Returns true if the current step is the last step."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.isLastStep // true or false\n")),Object(s.b)("h2",{id:"fields-state"},"Fields state"),Object(s.b)("h3",{id:"values"},"values"),Object(s.b)("p",null,"Returns an object with all the values of the form ",Object(s.b)("strong",{parentName:"p"},"with nested values"),".",Object(s.b)("br",null),"\nSee ",Object(s.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/core/use-field#name-"}),"the ",Object(s.b)("inlineCode",{parentName:"a"},"name")," props for fields")," for nested objects and array values."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.values\n/*\n{\n  fieldA: 'field A value',\n  nested: {\n    fieldB: 'field B value',\n  },\n  collection: [\n    { field: 'collection first value'\xa0},\n    { field: 'collection second value'\xa0},\n  ],\n}\n*/\n")),Object(s.b)("h3",{id:"flatvalues"},"flatValues"),Object(s.b)("p",null,"Returns an object with all the values of the form ",Object(s.b)("strong",{parentName:"p"},"without nested values"),"."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.flatValues\n/*\n{\n  fieldA: 'field A value',\n  'nested.fieldB': 'field B value',\n  'collection[0].field': 'collection first value',\n  'collection[1].field': 'collection second value',\n}\n*/\n")),Object(s.b)("h3",{id:"fields"},"fields"),Object(s.b)("p",null,"Returns an object with all the fields of the form with their hook values.",Object(s.b)("br",null),"\nSee the ",Object(s.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/core/use-field#name-"}),Object(s.b)("inlineCode",{parentName:"a"},"name")," props for fields")," for nested objects and array syntaxe.",Object(s.b)("br",null),"\nSee the ",Object(s.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/core/use-field#hook-values"}),"useField() hook values")," for available values."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const myForm = useForm()\nmyForm.fields\n/*\n{\n  fieldA: {\n    errorMessage: 'Required',\n    isValid: false,\n    value: 'My value',\n    // ... All useField hook values\n  },\n  nested: {\n    fieldB: {\n      // All useField hook values\n    },\n  },\n  collection: [\n    {\n      field: {\n        // All useField hook values\n      },\n    },\n    {\n      field: {\n        // useField hook values\n      },\n  \xa0 },\n  ],\n}\n*/\n\n// Examples\nmyForm.fields?.fieldA?.isValid\nmyForm.fields?.nested?.fieldB?.errorMessage\nmyForm.fields?.collection?.[0]?.field?.isPristine\n")))}b.isMDXComponent=!0},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var r=n(0),o=n.n(r);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),b=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=b(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,a=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=b(n),d=r,p=u["".concat(a,".").concat(d)]||u[d]||m[d]||s;return n?o.a.createElement(p,l(l({ref:t},c),{},{components:n})):o.a.createElement(p,l({ref:t},c))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,a=new Array(s);a[0]=d;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var c=2;c<s;c++)a[c]=n[c];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);