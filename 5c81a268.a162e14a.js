(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{64:function(e,a,n){"use strict";n.r(a),n.d(a,"frontMatter",(function(){return i})),n.d(a,"metadata",(function(){return o})),n.d(a,"rightToc",(function(){return s})),n.d(a,"default",(function(){return u}));var t=n(2),l=n(6),r=(n(0),n(83)),i={id:"use-field",title:"useField() hook"},o={unversionedId:"core/use-field",id:"core/use-field",isDocsHomePage:!1,title:"useField() hook",description:"Concept",source:"@site/docs/core/useField-hook.mdx",slug:"/core/use-field",permalink:"/docs/core/use-field",editUrl:"https://github.com/ivan-dalmet/formiz/edit/master/documentation/docs/core/useField-hook.mdx",version:"current",sidebar:"docs",previous:{title:"useForm() hook",permalink:"/docs/core/use-form"},next:{title:"Validation Rules",permalink:"/docs/validations/rules"}},s=[{value:"Concept",id:"concept",children:[]},{value:"Hooks methods",id:"hooks-methods",children:[{value:"setValue()",id:"setvalue",children:[]}]},{value:"Hook values",id:"hook-values",children:[{value:"value",id:"value",children:[]},{value:"valueDebounced",id:"valuedebounced",children:[]},{value:"id",id:"id",children:[]},{value:"isValid",id:"isvalid",children:[]},{value:"isValidating",id:"isvalidating",children:[]},{value:"isPristine",id:"ispristine",children:[]},{value:"isSubmitted",id:"issubmitted",children:[]},{value:"errorMessage",id:"errormessage",children:[]},{value:"errorMessages",id:"errormessages",children:[]},{value:"resetKey",id:"resetkey",children:[]}]},{value:"Hook extra values",id:"hook-extra-values",children:[{value:"otherProps",id:"otherprops",children:[]}]},{value:"Field props",id:"field-props",children:[{value:"name *",id:"name-",children:[]},{value:"debounce",id:"debounce",children:[]},{value:"defaultValue",id:"defaultvalue",children:[]},{value:"keepValue",id:"keepvalue",children:[]},{value:"formatValue(fieldValue)",id:"formatvaluefieldvalue",children:[]},{value:"onChange(fieldValue)",id:"onchangefieldvalue",children:[]},{value:"required",id:"required",children:[]},{value:"validations",id:"validations",children:[]},{value:"asyncValidations",id:"asyncvalidations",children:[]}]},{value:"PropTypes validations",id:"proptypes-validations",children:[]}],c={rightToc:s};function u(e){var a=e.components,n=Object(l.a)(e,["components"]);return Object(r.a)("wrapper",Object(t.a)({},c,n,{components:a,mdxType:"MDXLayout"}),Object(r.a)("h2",{id:"concept"},"Concept"),Object(r.a)("p",null,"When using the ",Object(r.a)("inlineCode",{parentName:"p"},"useField")," hook, you need to pass your component ",Object(r.a)("inlineCode",{parentName:"p"},"props")," to the hook."),Object(r.a)("p",null,"Then the hook gives you access to the field state."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react'\nimport { useField } from '@formiz/core'\n\nconst MyField = (props) => {\n  const {\n    value,\n    setValue,\n    isValid,\n    errorMessage,\n  } = useField(props)\n\n  return (\n    ...\n  )\n}\n")),Object(r.a)("hr",null),Object(r.a)("h2",{id:"hooks-methods"},"Hooks methods"),Object(r.a)("h3",{id:"setvalue"},"setValue()"),Object(r.a)("p",null,"Set the value of the field."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const MyField = (props) => {\n  const { setValue } = useField(props)\n\n  return <input onChange={(e) => setValue(e.target.value)} />\n}\n")),Object(r.a)("hr",null),Object(r.a)("h2",{id:"hook-values"},"Hook values"),Object(r.a)("h3",{id:"value"},"value"),Object(r.a)("p",null,"Get the current value of the field."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const MyField = (props) => {\n  const { value } = useField(props)\n\n  return <input value={value ?? ''} />\n}\n")),Object(r.a)("h3",{id:"valuedebounced"},"valueDebounced"),Object(r.a)("p",null,"Get the current value of the field, but sync with the debouncing.\nIt can be useful to determinate when to show error messages."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const { valueDebounced } = useField(props)\n")),Object(r.a)("h3",{id:"id"},"id"),Object(r.a)("p",null,"Return a unique id. This id will be created based on the ",Object(r.a)("a",Object(t.a)({parentName:"p"},{href:"/docs/core/formiz#id"}),"form id")," and the ",Object(r.a)("a",Object(t.a)({parentName:"p"},{href:"#name-"}),"field name"),"."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const MyField = (props) => {\n  const { id } = useField(props)\n\n  return (\n    <label htmlFor={id}>...</label>\n    <input id={id} />\n  )\n}\n")),Object(r.a)("h3",{id:"isvalid"},"isValid"),Object(r.a)("p",null,"Returns ",Object(r.a)("inlineCode",{parentName:"p"},"true")," if the field is valid."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const { isValid } = useField(props)\n")),Object(r.a)("h3",{id:"isvalidating"},"isValidating"),Object(r.a)("p",null,"Returns ",Object(r.a)("inlineCode",{parentName:"p"},"true")," if the field is running async validation."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const { isValidating } = useField(props)\n")),Object(r.a)("h3",{id:"ispristine"},"isPristine"),Object(r.a)("p",null,"Returns ",Object(r.a)("inlineCode",{parentName:"p"},"true")," if the field has not been changed."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const { isPristine } = useField(props)\n")),Object(r.a)("h3",{id:"issubmitted"},"isSubmitted"),Object(r.a)("p",null,"Returns ",Object(r.a)("inlineCode",{parentName:"p"},"true")," either if the current step or the form is submitted."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const { isSubmitted } = useField(props)\n")),Object(r.a)("h3",{id:"errormessage"},"errorMessage"),Object(r.a)("p",null,"Returns the first error message."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const { errorMessage } = useField(props)\n")),Object(r.a)("h3",{id:"errormessages"},"errorMessages"),Object(r.a)("p",null,"Returns all error messages."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const { errorMessages } = useField(props)\n")),Object(r.a)("h3",{id:"resetkey"},"resetKey"),Object(r.a)("p",null,"Allows you to put a key on elements that you want to be reinitialize when the from is reset.",Object(r.a)("br",null),"\nCan be useful for element like ",Object(r.a)("inlineCode",{parentName:"p"},"<input>")," or ",Object(r.a)("inlineCode",{parentName:"p"},"<select>"),"."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const MyField = (props) => {\n  const { resetKey } = useField(props)\n\n  useEffect(() => {\n    /* Do something on reset */\n  }, [resetKey])\n\n  return <input key={resetKey} />\n}\n")),Object(r.a)("hr",null),Object(r.a)("h2",{id:"hook-extra-values"},"Hook extra values"),Object(r.a)("p",null,"This values are not available in the useForm() ",Object(r.a)("inlineCode",{parentName:"p"},"fields")," object."),Object(r.a)("h3",{id:"otherprops"},"otherProps"),Object(r.a)("p",null,"Get the props passed to the component without the Formiz props.\nAllows you to keep composition by spreading this object in your component."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"const MyField = (props) => {\n  const { otherProps } = useField(props)\n\n  return (\n    <Box {...otherProps}>\n      {/* Field */}\n    </Box>\n  )\n}\n")),Object(r.a)("hr",null),Object(r.a)("h2",{id:"field-props"},"Field props"),Object(r.a)("p",null,"When a component is created with the ",Object(r.a)("inlineCode",{parentName:"p"},"useField()")," hook,\nyou can pass the following props to the component."),Object(r.a)("h3",{id:"name-"},"name *"),Object(r.a)("p",null,Object(r.a)("strong",{parentName:"p"},"Required")),Object(r.a)("p",null,"The name is required to register the field in the form."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" />\n')),Object(r.a)("p",null,Object(r.a)("strong",{parentName:"p"},"Nested objects")),Object(r.a)("p",null,"The ",Object(r.a)("inlineCode",{parentName:"p"},"name")," props can use lodash-like dot paths to reference nested values."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"<Field name=\"fieldA\" />\n<Field name=\"fieldB\" />\n<Field name=\"myGroup.fieldA\" />\n<Field name=\"myGroup.fieldB\" />\n\n/* Form values\n{\n  fieldA: 'value',\n  fieldB: 'value',\n  myGroup: {\n    fieldA: 'value',\n    fieldB: 'value',\n  },\n}\n*/\n")),Object(r.a)("p",null,Object(r.a)("strong",{parentName:"p"},"Arrays")),Object(r.a)("p",null,"The ",Object(r.a)("inlineCode",{parentName:"p"},"name")," props allow also arrays and arrays of objects out of the box.\nUsing lodash-like bracket syntax for ",Object(r.a)("inlineCode",{parentName:"p"},"name")," allow you to handle fields in a list."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"<Field name=\"myArray[0]\" />\n<Field name=\"myArray[1]\" />\n<Field name=\"myArrayOfObjects[0].fieldA\" />\n<Field name=\"myArrayOfObjects[0].fieldB\" />\n<Field name=\"myArrayOfObjects[1].fieldA\" />\n<Field name=\"myArrayOfObjects[1].fieldB\" />\n\n/* Form values\n{\n  myArray: ['value', 'value'],\n  myArrayOfObjects: [\n    { fieldA: 'value', fieldB: 'value' },\n    { fieldA: 'value', fieldB: 'value' },\n  ],\n}\n*/\n")),Object(r.a)("h3",{id:"debounce"},"debounce"),Object(r.a)("p",null,"Number of milliseconds for debouncing validations. (default is ",Object(r.a)("inlineCode",{parentName:"p"},"100"),")."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" debounce={200} />\n')),Object(r.a)("h3",{id:"defaultvalue"},"defaultValue"),Object(r.a)("p",null,"Pass an initial value to the field."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" defaultValue="My initial value" />\n')),Object(r.a)("h3",{id:"keepvalue"},"keepValue"),Object(r.a)("p",null,"Set to ",Object(r.a)("inlineCode",{parentName:"p"},"true")," to keep the value when the field is unmounted from the DOM. (default is ",Object(r.a)("inlineCode",{parentName:"p"},"false"),")."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" keepValue />\n')),Object(r.a)("h3",{id:"formatvaluefieldvalue"},"formatValue(fieldValue)"),Object(r.a)("p",null,"Format the value before saving it into the internal state."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"<Field name=\"myFieldName\" formatValue={val => (val || '').trim()} />\n")),Object(r.a)("h3",{id:"onchangefieldvalue"},"onChange(fieldValue)"),Object(r.a)("p",null,"Triggered everytime that setValue() is called inside the field."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" onChange={(val) => console.log(val)} />\n')),Object(r.a)("h3",{id:"required"},"required"),Object(r.a)("p",null,"Shortcut for isRequired() validation"),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),'<Field name="myFieldName" required="Field is required" />\n')),Object(r.a)("h3",{id:"validations"},"validations"),Object(r.a)("p",null,"Accept an array of object with the following keys:"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},Object(r.a)("inlineCode",{parentName:"li"},"rule(fieldValue)"),": Built in validation rule or custom validation function (must returns ",Object(r.a)("inlineCode",{parentName:"li"},"true")," if the rule is valid)."),Object(r.a)("li",{parentName:"ul"},Object(r.a)("inlineCode",{parentName:"li"},"deps"),": Array of external values used in the rule function (like array of dependencies in useEffect)."),Object(r.a)("li",{parentName:"ul"},Object(r.a)("inlineCode",{parentName:"li"},"message"),": The message if the rule is invalid.")),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"<Field\n  name=\"myFieldName\"\n  validations={[\n    {\n      rule: isRequired(),\n      message: 'Field is required',\n    },\n    {\n      rule: isNotEmptyString(),\n      message: 'Field can\\'t be empty',\n    },\n    {\n      rule: (value) => value.toLowerCase() !== 'john',\n      message: 'Field can\\'t be john',\n    },\n    {\n      rule: (value) => value !== externalValue,\n      deps: [externalValue],\n      message: 'Field can\\'t be the same as external value',\n    },\n  ]}\n/>\n")),Object(r.a)("h3",{id:"asyncvalidations"},"asyncValidations"),Object(r.a)("p",null,"Async validations allows you to run asynchronous code to validate a field, such as an API call.\n",Object(r.a)("inlineCode",{parentName:"p"},"asyncValidations")," will only be triggered if all the others ",Object(r.a)("inlineCode",{parentName:"p"},"validations")," rules are valid."),Object(r.a)("p",null,"Accept an array of object with the following keys:"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},Object(r.a)("inlineCode",{parentName:"li"},"rule(fieldValue)"),": Must returns a ",Object(r.a)("strong",{parentName:"li"},"Promise")," that returns ",Object(r.a)("inlineCode",{parentName:"li"},"true")," if the rule is valid."),Object(r.a)("li",{parentName:"ul"},Object(r.a)("inlineCode",{parentName:"li"},"deps"),": Array of external values used in the rule function (like array of dependencies in useEffect)."),Object(r.a)("li",{parentName:"ul"},Object(r.a)("inlineCode",{parentName:"li"},"message"),": The message if the rule is invalid.")),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"<Field\n  name=\"myFieldName\"\n  asyncValidations={[\n    {\n      rule: async(value) => {\n        const isAlreadyUsed = await validateUsername(value)\n        return isAlreadyUsed;\n      },\n      message: 'Username already used, please select another one.',\n    }\n  ]}\n/>\n")),Object(r.a)("hr",null),Object(r.a)("h2",{id:"proptypes-validations"},"PropTypes validations"),Object(r.a)("p",null,"If you are using ",Object(r.a)("a",Object(t.a)({parentName:"p"},{href:"https://www.npmjs.com/package/prop-types"}),"prop-types")," to document props in your project,\nyou can get ",Object(r.a)("inlineCode",{parentName:"p"},"fieldPropTypes")," and ",Object(r.a)("inlineCode",{parentName:"p"},"fieldDefaultProps")," from ",Object(r.a)("inlineCode",{parentName:"p"},"@formiz/core")," to pass to your custom fields for PropTypes validations."),Object(r.a)("pre",null,Object(r.a)("code",Object(t.a)({parentName:"pre"},{className:"language-jsx"}),"// MyField.js\nimport React from 'react'\nimport { useField, fieldPropTypes, fieldDefaultProps } from '@formiz/core'\n\nconst MyField = (props) => {\n  // ...\n}\n\nMyField.propTypes = {\n  ...fieldPropTypes,\n  // Your custom props\n}\n\nMyField.defaultProps = {\n  ...fieldDefaultProps,\n  // Your custom props\n}\n")))}u.isMDXComponent=!0},83:function(e,a,n){"use strict";n.d(a,"a",(function(){return m}));var t=n(0),l=n.n(t);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,t,l=function(e,a){if(null==e)return{};var n,t,l={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(l[n]=e[n]);return l}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var c=l.a.createContext({}),u=function(e){var a=l.a.useContext(c),n=a;return e&&(n="function"==typeof e?e(a):o({},a,{},e)),n},d={inlineCode:"code",wrapper:function(e){var a=e.children;return l.a.createElement(l.a.Fragment,{},a)}},p=Object(t.forwardRef)((function(e,a){var n=e.components,t=e.mdxType,r=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=t,b=p["".concat(i,".").concat(m)]||p[m]||d[m]||r;return n?l.a.createElement(b,o({ref:a},c,{components:n})):l.a.createElement(b,o({ref:a},c))}));function m(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var r=n.length,i=new Array(r);i[0]=p;var o={};for(var s in a)hasOwnProperty.call(a,s)&&(o[s]=a[s]);o.originalType=e,o.mdxType="string"==typeof e?e:t,i[1]=o;for(var c=2;c<r;c++)i[c]=n[c];return l.a.createElement.apply(null,i)}return l.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);